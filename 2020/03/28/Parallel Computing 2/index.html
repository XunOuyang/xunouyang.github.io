<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Multi-Threading in Python | Ivan Xun Ouyang`s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="This article will introduce the most basic 5 different multi-threading methods implementation in Python. We will use a very simple example to show how to make use of these 5 different methods to solve">
<meta property="og:type" content="article">
<meta property="og:title" content="Multi-Threading in Python">
<meta property="og:url" content="https://github.com/XunOuyang/xunouyang.github.io/blob/master/2020/03/28/Parallel%20Computing%202/index.html">
<meta property="og:site_name" content="Ivan Xun Ouyang&#96;s Blog">
<meta property="og:description" content="This article will introduce the most basic 5 different multi-threading methods implementation in Python. We will use a very simple example to show how to make use of these 5 different methods to solve">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-03-28T15:58:25.000Z">
<meta property="article:modified_time" content="2020-03-28T16:32:00.676Z">
<meta property="article:author" content="Ivan Xun Ouyang">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="../../../../atom.xml" title="Ivan Xun Ouyang`s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="../../../../css/style.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="../../../../index.html" id="logo">Ivan Xun Ouyang`s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="../../../../index.html">Home</a>
        
          <a class="main-nav-link" href="../../../../archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="../../../../atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://github.com/XunOuyang/xunouyang.github.io/blob/master"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Parallel Computing 2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="" class="article-date">
  <time datetime="2020-03-28T15:58:25.000Z" itemprop="datePublished">2020-03-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="../../../../categories/Parallel-Computing/">Parallel Computing</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Multi-Threading in Python
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This article will introduce the most basic 5 different multi-threading methods implementation in Python. We will use a very simple example to show how to make use of these 5 different methods to solve the same problem.</p>
<p>Suppose we have a class:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class Foo(object):</span><br><span class="line">    def first():</span><br><span class="line">	printFirst()</span><br><span class="line">    def second():</span><br><span class="line">        printSecond()    </span><br><span class="line">    def third():</span><br><span class="line">        printThird()</span><br></pre></td></tr></table></figure>

<p>Now we have an instance of Foo which will be passed to 3 different threads. Thread A will call first(), thread B will call second(),  thread C will call third(). Design a mechanism to ensure that the second() is executed after first(), third() is executed after second().</p>
<p>We definite can make use of a very brutal force way to solve this problem by setting a flag with in the class. Until the flag was trigger, we are not able to move forward. Refer to the code below:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">import time</span><br><span class="line">class Foo(object):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.status &#x3D; 0</span><br><span class="line"></span><br><span class="line">    def first(self, printFirst):</span><br><span class="line">        # printFirst() outputs &quot;first&quot;. Do not change or remove this line.</span><br><span class="line">        while self.status !&#x3D; 0:</span><br><span class="line">            time.sleep(0.001)</span><br><span class="line">        printFirst()</span><br><span class="line">        self.status &#x3D; 1</span><br><span class="line">        </span><br><span class="line">    def second(self, printSecond):</span><br><span class="line">        # printSecond() outputs &quot;second&quot;. Do not change or remove this line.</span><br><span class="line">        while self.status !&#x3D; 1:</span><br><span class="line">            time.sleep(0.001)</span><br><span class="line">        printSecond()</span><br><span class="line">        self.status &#x3D; 2</span><br><span class="line">            </span><br><span class="line">    def third(self, printThird):</span><br><span class="line">        # printThird() outputs &quot;third&quot;. Do not change or remove this line.</span><br><span class="line">        while self.status !&#x3D; 2:</span><br><span class="line">            time.sleep(0.001)</span><br><span class="line">        printThird()</span><br></pre></td></tr></table></figure>
<p>The code above is very well self-explained, we won`t spend extra time on it. Let`s take some time to dig into the </p>
<h1 id="Barrier"><a href="#Barrier" class="headerlink" title="Barrier"></a>Barrier</h1><p>Barrier objects in python are used to wait for a fixed number of thread to complete execution before any particular thread can proceed forward with the execution of the program. Each thread calls wait() function upon reaching the barrier. The barrier is responsible for keeping track of the number of wait() calls. If this number goes beyond the number of threads for which the barrier was initialized with, then the barrier gives a way to the waiting threads to proceed on with the execution. All the threads at this point of execution, are simultaneously released.</p>
<ol>
<li>parties<br> A number of threads required to reach the common barrier point.</li>
<li>n_waiting<br> Number of threads waiting in the common barrier point</li>
<li>broken<br> A boolean value, True- if the barrier is in the broken state else False.</li>
<li>wait( timeout = None)<br> Wait until notified or a timeout occurs. If the calling thread has not acquired the lock when this method is called, a runtime error is raised.<br>This method releases the underlying lock and then blocks until it is awakened by a notify() or notify_all() method call for the same condition variable in another thread, or until the optional timeout occurs. Once awakened or timed out, it re-acquires the lock and returns.<br>When the timeout argument is present and not None, it should be a floating point number specifying a timeout for the operation in seconds (or fractions thereof).</li>
<li>reset()<br> Set or return the barrier to the default state .i.e. empty state. And threads waiting on it will receive the BrokenBarrierError.</li>
<li>Abort()<br> This will put the barrier into a broken state. This causes all the active threads or any future calls to wait() to fail with the BrokenBarrierError.</li>
</ol>
<p>Here is a program to show how barrier works in python</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">import threading </span><br><span class="line">  </span><br><span class="line">barrier &#x3D; threading.Barrier(3) </span><br><span class="line">  </span><br><span class="line">class thread(threading.Thread): </span><br><span class="line">    def __init__(self, thread_ID): </span><br><span class="line">        threading.Thread.__init__(self) </span><br><span class="line">        self.thread_ID &#x3D; thread_ID </span><br><span class="line">    def run(self): </span><br><span class="line">        print(str(self.thread_ID) + &quot;\n&quot;) </span><br><span class="line">        print(&quot;Parties &#x3D; &quot; + str(barrier.parties) + &quot;\n&quot;) </span><br><span class="line">        print(&quot;n_waiting &#x3D; &quot; + str(barrier.n_waiting) + &quot;\n&quot;) </span><br><span class="line">        barrier.wait() </span><br><span class="line">          </span><br><span class="line">thread1 &#x3D; thread(100) </span><br><span class="line">thread2 &#x3D; thread(101) </span><br><span class="line">  </span><br><span class="line">thread1.start() </span><br><span class="line">thread2.start() </span><br><span class="line">  </span><br><span class="line">barrier.wait() </span><br><span class="line">  </span><br><span class="line">print(str(barrier.broken) + &quot;\n&quot;) </span><br><span class="line">barrier.reset() </span><br><span class="line">print(&quot;n_waiting after reset &#x3D; &quot; + str(barrier.n_waiting)) </span><br><span class="line">barrier.abort() </span><br><span class="line">print(&quot;End&quot;)</span><br></pre></td></tr></table></figure>

<h1 id="Referrence"><a href="#Referrence" class="headerlink" title="Referrence:"></a>Referrence:</h1><p><a href="https://leetcode.com/problems/print-in-order/discuss/335939/5-Python-threading-solutions-(Barrier-Lock-Event-Semaphore-Condition)-with-explanation" target="_blank" rel="noopener">https://leetcode.com/problems/print-in-order/discuss/335939/5-Python-threading-solutions-(Barrier-Lock-Event-Semaphore-Condition)-with-explanation</a><br><a href="https://www.geeksforgeeks.org/barrier-objects-python/" target="_blank" rel="noopener">https://www.geeksforgeeks.org/barrier-objects-python/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/XunOuyang/xunouyang.github.io/blob/master/2020/03/28/Parallel%20Computing%202/" data-id="ck8bu1s5w0001shsj8f8rd4w8" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="../Multi-Threading%20in%20Python/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Multi-Threading in Python</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="../../../../categories/Parallel-Computing/">Parallel Computing</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="../../../../tags/Autonomous-Driving/" rel="tag">Autonomous Driving</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="../../../../tags/Autonomous-Driving/" style="font-size: 10px;">Autonomous Driving</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="../../../../archives/2020/03/">March 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="">Multi-Threading in Python</a>
          </li>
        
          <li>
            <a href="../Multi-Threading%20in%20Python/">Multi-Threading in Python</a>
          </li>
        
          <li>
            <a href="../../27/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="../../25/Lidar-Data-PostProcessing1/">Lidar Data PostProcessing1</a>
          </li>
        
          <li>
            <a href="../../25/Parallel%20Computing1/">Parallel Computing 1</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Ivan Xun Ouyang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="../../../../index.html" class="mobile-nav-link">Home</a>
  
    <a href="../../../../archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="../../../../fancybox/jquery.fancybox.css">

  
<script src="../../../../fancybox/jquery.fancybox.pack.js"></script>




<script src="../../../../js/script.js"></script>




  </div>
</body>
</html>